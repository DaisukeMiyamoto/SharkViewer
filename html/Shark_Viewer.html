<!doctype html>
<html>
	<head>
		<title>Shark Viewer</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		
			
		<script src="js/threejs/three.js"></script>
		<script src="js/threejs/TrackballControls.js"></script>
		<script src="./js/shark_viewer.js"></script>
		<!-- optional only if show_stats = true -->
		<script src="js/threejs/Stats.js"></script>
</head>
<body>
	<label for='swc_input'>Upload a swc file to view in the SharkViewer:</label><input type='file' name='swc_input' id='swc_input' />
	<!-- three.js container -->
    	<div id="container"></div>
	<!-- info on screen display -->


	<script type='text/javascript'>
	function readSwcFile(e) {
		var f = e.target.files[0]; 
		console.log(f);
		if (f) {
			var r = new FileReader();
			r.onload = function(e2) { 
				var swc_txt = e2.target.result;
				var swc = swc_parser(swc_txt);
				if ( Object.keys(swc).length > 0 ) {
					document.getElementById('container').innerHTML = "";
					var s = new SharkViewer({swc: swc, dom_element: 'container', center_node: -1, show_stats: true});
					s.init();
					s.animate();
				}
				else {
					alert("Please upload a valid swc file.");
				}
			}
			r.readAsText(f);
		} else { 
		      alert("Failed to load file");
		}
	}
	window.onload = function() {
		document.getElementById('swc_input').addEventListener('change', readSwcFile, false);
	}
	</script>
</body>
</html>

